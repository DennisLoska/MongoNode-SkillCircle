<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skill circle</title>
</head>

<body>
    <div>
        <button onclick="createCall()">CREATE CALL</button>
        <button onclick="getCalls()">GET CALLS</button>
        <button onclick="updateCall()">UPDATE CALL</button>
        <button onclick="deleteCalls()">DELETE ALL CALLS</button>
    </div>
</body>

<script>
    const createCall = async () => {
        const response = await fetch('http://localhost:8080/create_call', {
            method: 'POST',
            body: JSON.stringify({
                transcription: "Hello dear node skill circle",
                phone_number: "+49123456789",
                callback: true,
                country: "DE"
            }),
            headers: {
                "Content-type": "application/json; charset=UTF-8"
            }
        })
        const newCall = await response.json();
        const domBody = document.getElementsByTagName('body')[0];
        domBody.append(newCall);
    }

    const getCalls = async () => {
        const response = await fetch('http://localhost:8080/get_calls')
        const calls = await response.json();
        const domBody = document.getElementsByTagName('body')[0];
        domBody.append(calls);
    }

    const updateCall = async () => {
        const response = await fetch('http://localhost:8080/update_call?id=5fb2ed81a48ec60011c39b12', {
            method: 'POST',
            body: JSON.stringify({
                transcription: "This is the updated transcription!"
            }),
            headers: {
                "Content-type": "application/json; charset=UTF-8"
            }
        })
        const updatedCall = await response.json();
        const domBody = document.getElementsByTagName('body')[0];
        domBody.append(updatedCall);
    }

    const deleteCalls = async () => {
        const response = await fetch('http://localhost:8080/delete_calls')
        const calls = await response.json();
        const domBody = document.getElementsByTagName('body')[0];
        domBody.append(calls);
    }

</script>

</html>